!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.textMaskCore=r():e.textMaskCore=r()}(this,(()=>(()=>{"use strict";var e={d:(r,t)=>{for(var o in t)e.o(t,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:t[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{adjustCaretPosition:()=>v,conformToMask:()=>d,createTextMaskInputElement:()=>w});var t="_",o="function",n=[];function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(!a(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(r))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(r),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?r:e})).join("")}function a(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function u(e){return"string"==typeof e||e instanceof String}function l(e){for(var r,t=[];-1!==(r=e.indexOf("[]"));)t.push(r),e.splice(r,1);return{maskWithoutCaretTraps:e,indexes:t}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var f=[],c="";function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a(r)){if(s(r)!==o)throw new Error("Text-mask:conformToMask; The mask property must be an array.");r=l(r=r(e,n)).maskWithoutCaretTraps}var u=n.guide,d=void 0===u||u,p=n.previousConformedValue,h=void 0===p?c:p,v=n.placeholderChar,m=void 0===v?t:v,y=n.placeholder,g=void 0===y?i(r,m):y,b=n.currentCaretPosition,O=n.keepCharPositions,C=!1===d&&void 0!==h,P=e.length,k=h.length,w=g.length,x=r.length,j=P-k,S=j>0,T=b+(S?-j:0),V=T+Math.abs(j);if(!0===O&&!S){for(var E=c,M=T;M<V;M++)g[M]===m&&(E+=m);e=e.slice(0,T)+E+e.slice(T,P)}for(var A=e.split(c).map((function(e,r){return{char:e,isNew:r>=T&&r<V}})),N=P-1;N>=0;N--){var D=A[N].char;if(D!==m){var R=N>=T&&k===x;D===g[R?N-j:N]&&A.splice(N,1)}}var I=c,J=!1;e:for(var W=0;W<w;W++){var _=g[W];if(_===m){if(A.length>0)for(;A.length>0;){var q=A.shift(),F=q.char,L=q.isNew;if(F===m&&!0!==C){I+=m;continue e}if(r[W].test(F)){if(!0===O&&!1!==L&&h!==c&&!1!==d&&S){for(var z=A.length,B=null,G=0;G<z;G++){var H=A[G];if(H.char!==m&&!1===H.isNew)break;if(H.char===m){B=G;break}}null!==B?(I+=F,A.splice(B,1)):W--}else I+=F;continue e}J=!0}!1===C&&(I+=g.substr(W,w));break}I+=_}if(C&&!1===S){for(var K=null,Q=0;Q<I.length;Q++)g[Q]===m&&(K=Q);I=null!==K?I.substr(0,K+1):c}return{conformedValue:I,meta:{someCharsRejected:J}}}var p=[],h="";function v(e){var r=e.previousConformedValue,t=void 0===r?h:r,o=e.previousPlaceholder,n=void 0===o?h:o,i=e.currentCaretPosition,a=void 0===i?0:i,u=e.conformedValue,l=e.rawValue,s=e.placeholderChar,f=e.placeholder,c=e.indexesOfPipedChars,d=void 0===c?p:c,v=e.caretTrapIndexes,m=void 0===v?p:v;if(0===a||!l.length)return 0;var y=l.length,g=t.length,b=f.length,O=u.length,C=y-g,P=C>0;if(C>1&&!P&&0!==g)return a;var k,w,x=0;if(!P||t!==u&&u!==f){var j=u.toLowerCase(),S=l.toLowerCase().substr(0,a).split(h).filter((function(e){return-1!==j.indexOf(e)}));w=S[S.length-1];var T=n.substr(0,S.length).split(h).filter((function(e){return e!==s})).length,V=f.substr(0,S.length).split(h).filter((function(e){return e!==s})).length!==T,E=void 0!==n[S.length-1]&&void 0!==f[S.length-2]&&n[S.length-1]!==s&&n[S.length-1]!==f[S.length-1]&&n[S.length-1]===f[S.length-2];!P&&(V||E)&&T>0&&f.indexOf(w)>-1&&void 0!==l[a]&&(k=!0,w=l[a]);for(var M=d.map((function(e){return j[e]})).filter((function(e){return e===w})).length,A=S.filter((function(e){return e===w})).length,N=f.substr(0,f.indexOf(s)).split(h).filter((function(e,r){return e===w&&l[r]!==e})).length+A+M+(k?1:0),D=0,R=0;R<O&&(x=R+1,j[R]===w&&D++,!(D>=N));R++);}else x=a-C;if(P){for(var I=x,J=x;J<=b;J++)if(f[J]===s&&(I=J),f[J]===s||-1!==m.indexOf(J)||J===b)return I}else if(k){for(var W=x-1;W>=0;W--)if(u[W]===w||-1!==m.indexOf(W)||0===W)return W}else for(var _=x;_>=0;_--)if(f[_-1]===s||-1!==m.indexOf(_)||0===_)return _}function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){g(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var O="none",C="object",P="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),k="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;function w(e){var r={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:r,update:function(n){var a,s,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,c=f.inputElement,p=f.mask,h=f.guide,m=f.pipe,g=f.placeholderChar,O=void 0===g?t:g,P=f.keepCharPositions,k=void 0!==P&&P,w=f.showMask,S=void 0!==w&&w;if(void 0===n&&(n=c.value),n!==r.previousConformedValue&&(b(p)===C&&void 0!==p.pipe&&void 0!==p.mask&&(m=p.pipe,p=p.mask),p instanceof Array&&(a=i(p,O)),!1!==p)){var T,V=j(n),E=c.selectionEnd,M=r.previousConformedValue,A=r.previousPlaceholder;if(b(p)===o){if(!1===(s=p(V,{currentCaretPosition:E,previousConformedValue:M,placeholderChar:O})))return;var N=l(s),D=N.maskWithoutCaretTraps,R=N.indexes;T=R,a=i(s=D,O)}else s=p;var I={previousConformedValue:M,guide:h,placeholderChar:O,pipe:m,placeholder:a,currentCaretPosition:E,keepCharPositions:k},J=d(V,s,I),W=J.conformedValue,_=b(m)===o,q={};_&&(!1===(q=m(W,y({rawValue:V},I)))?q={value:M,rejected:!0}:u(q)&&(q={value:q}));var F=_?q.value:W,L=v({previousConformedValue:M,previousPlaceholder:A,conformedValue:F,placeholder:a,rawValue:V,currentCaretPosition:E,placeholderChar:O,indexesOfPipedChars:q.indexesOfPipedChars,caretTrapIndexes:T}),z=F===a&&0===L,B=S?a:"",G=z?B:F;r.previousConformedValue=G,r.previousPlaceholder=a,c.value!==G&&(c.value=G,x(c,L))}}}}function x(e,r){document.activeElement===e&&(P?k((function(){return e.setSelectionRange(r,r,O)}),0):e.setSelectionRange(r,r,O))}function j(e){if(u(e))return e;if("number"!=typeof(r=e)||void 0!==r.length||isNaN(r)){if(null==e)return"";throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+"received was:\n\n ".concat(JSON.stringify(e)))}return String(e);var r}return r})()));